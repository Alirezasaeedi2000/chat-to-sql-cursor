{
  "summary": {
    "total_tests": 27,
    "successful_tests": 24,
    "mode_correct_tests": 20,
    "success_rate": 88.88888888888889,
    "mode_accuracy": 74.07407407407408,
    "avg_execution_time": 20.77805444046303
  },
  "category_stats": {
    "Schema Understanding": {
      "total": 3,
      "success": 2,
      "mode_correct": 2
    },
    "Pattern Recognition": {
      "total": 5,
      "success": 4,
      "mode_correct": 3
    },
    "Visualization": {
      "total": 4,
      "success": 3,
      "mode_correct": 3
    },
    "Analytics": {
      "total": 3,
      "success": 3,
      "mode_correct": 2
    },
    "Clarification": {
      "total": 4,
      "success": 4,
      "mode_correct": 3
    },
    "Complex Joins": {
      "total": 3,
      "success": 3,
      "mode_correct": 3
    },
    "Time Series": {
      "total": 2,
      "success": 2,
      "mode_correct": 1
    },
    "Edge Cases": {
      "total": 3,
      "success": 3,
      "mode_correct": 3
    }
  },
  "detailed_results": [
    {
      "query": "Show me employee details along with their department information",
      "category": "Schema Understanding",
      "expected_mode": "TABLE",
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 19.305617570877075,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ \n  e.first_name, \n  e.last_name, \n  d.name AS department_name, \n  d.location AS department_location\nFROM `employe` e\nJOIN `departments` d ON e.department_id = d...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:43:20.546780"
    },
    {
      "query": "Which employees work on projects managed by someone from a different department?",
      "category": "Schema Understanding",
      "expected_mode": "TABLE",
      "actual_mode": "ERROR",
      "mode_correct": false,
      "sql_generated": false,
      "success": false,
      "execution_time": 19.784102201461792,
      "sql": "",
      "error": "object of type 'NoneType' has no len()",
      "timestamp": "2025-09-15T15:43:40.832416"
    },
    {
      "query": "List employees whose managers earn less than them",
      "category": "Schema Understanding",
      "expected_mode": "TABLE",
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 18.63300108909607,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ e.first_name, e.last_name \nFROM `performance` p JOIN `employe` e ON p.employee_id=e.id \nWHERE p.manager_rating < e.salary LIMIT 50",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:43:59.966350"
    },
    {
      "query": "Show a pie chart of employees working in exactly 2 active projects by department",
      "category": "Pattern Recognition",
      "expected_mode": "VISUALIZATION",
      "actual_mode": "ERROR",
      "mode_correct": false,
      "sql_generated": false,
      "success": false,
      "execution_time": 22.11207389831543,
      "sql": "",
      "error": "object of type 'NoneType' has no len()",
      "timestamp": "2025-09-15T15:44:22.579887"
    },
    {
      "query": "Count employees by department",
      "category": "Pattern Recognition",
      "expected_mode": "TABLE",
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 16.935424089431763,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ d.name, COUNT(*)\nFROM `employe` e\nJOIN `departments` d ON e.department_id = d.id\nGROUP BY d.name\nORDER BY COUNT(*) DESC\nLIMIT 50",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:44:40.016709"
    },
    {
      "query": "Compare Engineering vs Sales headcount over the last 3 years",
      "category": "Pattern Recognition",
      "expected_mode": "ANALYTICAL",
      "actual_mode": "ANALYTICAL",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 34.632283210754395,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ p.year,\n  SUM(CASE WHEN d.name = 'Engineering' THEN 1 ELSE 0 END) AS engineering_count,\n  SUM(CASE WHEN d.name = 'Sales' THEN 1 ELSE 0 END) AS sales_count\nFROM ...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": true,
      "timestamp": "2025-09-15T15:45:15.152357"
    },
    {
      "query": "Which employees have managers in the same department?",
      "category": "Pattern Recognition",
      "expected_mode": "TABLE",
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 18.606624364852905,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ e.first_name, e.last_name \nFROM `employe` e JOIN `departments` d ON e.department_id=d.id \nJOIN `performance` p ON e.id=p.employee_id \nWHERE d.manager_id=e.depar...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:45:34.259649"
    },
    {
      "query": "How many employees are working on exactly 4 ongoing projects?",
      "category": "Pattern Recognition",
      "expected_mode": "SHORT_ANSWER",
      "actual_mode": "TABLE",
      "mode_correct": false,
      "sql_generated": true,
      "success": true,
      "execution_time": 22.70504140853882,
      "sql": "SELECT COUNT(*) \nFROM `employee_projects` \nWHERE projects_involved = 4;",
      "error": "",
      "has_table": false,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:45:57.466109"
    },
    {
      "query": "Create a pie chart of project budgets",
      "category": "Visualization",
      "expected_mode": "VISUALIZATION",
      "actual_mode": "VISUALIZATION",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 18.60426115989685,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ \n  name, \n  budget AS value\nFROM \n  `projects`\nORDER BY \n  budget DESC\nLIMIT 50;",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:46:16.571354"
    },
    {
      "query": "Plot salary distribution across departments",
      "category": "Visualization",
      "expected_mode": "VISUALIZATION",
      "actual_mode": "ERROR",
      "mode_correct": false,
      "sql_generated": false,
      "success": false,
      "execution_time": 22.57793879508972,
      "sql": "",
      "error": "object of type 'NoneType' has no len()",
      "timestamp": "2025-09-15T15:46:39.650524"
    },
    {
      "query": "Show a trend graph of hiring over time",
      "category": "Visualization",
      "expected_mode": "VISUALIZATION",
      "actual_mode": "VISUALIZATION",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 21.57063603401184,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ \n  p.year, \n  COUNT(*) AS hiring_count\nFROM \n  performance p\nGROUP BY \n  p.year\nORDER BY \n  p.year\nLIMIT 50;",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:47:01.722682"
    },
    {
      "query": "Generate a histogram of project durations",
      "category": "Visualization",
      "expected_mode": "VISUALIZATION",
      "actual_mode": "VISUALIZATION",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 25.694000005722046,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ \n  duration,\n  COUNT(*) AS count\nFROM (\n  SELECT \n    TIMESTAMPDIFF(MONTH, start_date, end_date) AS duration\n  FROM `projects`\n) AS subquery\nGROUP BY duration\nO...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:47:27.918075"
    },
    {
      "query": "Analyze the correlation between employee salary and project budget",
      "category": "Analytics",
      "expected_mode": "ANALYTICAL",
      "actual_mode": "ANALYTICAL",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 32.37326407432556,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ \n  p.name AS project_name, \n  e.salary, \n  p.budget\nFROM \n  `employe` e\nJOIN \n  `employee_projects` ep ON e.id = ep.employee_id\nJOIN \n  `projects` p ON ep.proje...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:48:00.793462"
    },
    {
      "query": "What trends do you see in hiring across departments?",
      "category": "Analytics",
      "expected_mode": "ANALYTICAL",
      "actual_mode": "ANALYTICAL",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 29.26135754585266,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ \n  d.name AS department_name, \n  COUNT(e.id) AS employee_count\nFROM \n  `employe` e \nJOIN \n  `departments` d ON e.department_id = d.id\nGROUP BY \n  d.name\nORDER B...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:48:30.555699"
    },
    {
      "query": "Compare project success rates by department",
      "category": "Analytics",
      "expected_mode": "ANALYTICAL",
      "actual_mode": "CLARIFICATION",
      "mode_correct": false,
      "sql_generated": false,
      "success": true,
      "execution_time": 9.277525663375854,
      "sql": "",
      "error": "",
      "has_table": false,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:48:40.334010"
    },
    {
      "query": "We need more employees",
      "category": "Clarification",
      "expected_mode": "CLARIFICATION",
      "actual_mode": "ANALYTICAL",
      "mode_correct": false,
      "sql_generated": true,
      "success": true,
      "execution_time": 18.26484990119934,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ COUNT(*) \nFROM `employe` LIMIT 50",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": true,
      "timestamp": "2025-09-15T15:48:59.099728"
    },
    {
      "query": "Show me performance data",
      "category": "Clarification",
      "expected_mode": null,
      "actual_mode": "CLARIFICATION",
      "mode_correct": true,
      "sql_generated": false,
      "success": true,
      "execution_time": 9.245560646057129,
      "sql": "",
      "error": "",
      "has_table": false,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:49:08.846284"
    },
    {
      "query": "Compare departments",
      "category": "Clarification",
      "expected_mode": "CLARIFICATION",
      "actual_mode": "CLARIFICATION",
      "mode_correct": true,
      "sql_generated": false,
      "success": true,
      "execution_time": 10.899547338485718,
      "sql": "",
      "error": "",
      "has_table": false,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:49:20.246551"
    },
    {
      "query": "How are we doing?",
      "category": "Clarification",
      "expected_mode": "CLARIFICATION",
      "actual_mode": "CLARIFICATION",
      "mode_correct": true,
      "sql_generated": false,
      "success": true,
      "execution_time": 9.479605913162231,
      "sql": "",
      "error": "",
      "has_table": false,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:49:30.227476"
    },
    {
      "query": "Show employees working on the most expensive projects in each department",
      "category": "Complex Joins",
      "expected_mode": "TABLE",
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 28.52399754524231,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ d.name, COUNT(*)\nFROM `employe` e\nJOIN `departments` d ON e.department_id = d.id\nGROUP BY d.name\nORDER BY COUNT(*) DESC\nLIMIT 50",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:49:59.253058"
    },
    {
      "query": "Which departments have employees working on projects with budgets over 100k?",
      "category": "Complex Joins",
      "expected_mode": "TABLE",
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 24.280009984970093,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ d.name, COUNT(*)\nFROM `departments` d\nJOIN `employee_projects` ep ON d.id = ep.employee_id\nJOIN `projects` p ON ep.project_id = p.id\nWHERE p.budget > 100000\nGRO...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:50:24.034194"
    },
    {
      "query": "Find employees who share skills with their project teammates",
      "category": "Complex Joins",
      "expected_mode": "TABLE",
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 25.98686671257019,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ e.first_name, e.last_name \nFROM `employe` e \nJOIN `employee_projects` ep ON e.id = ep.employee_id \nWHERE e.id IN (\n  SELECT s1.employee_id \n  FROM `skills` s1 \n...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:50:50.522679"
    },
    {
      "query": "Show hiring trends for the last 5 years",
      "category": "Time Series",
      "expected_mode": "ANALYTICAL",
      "actual_mode": "TABLE",
      "mode_correct": false,
      "sql_generated": true,
      "success": true,
      "execution_time": 24.384914875030518,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ \n  p.year, \n  SUM(CASE WHEN d.name = 'Engineering' THEN 1 ELSE 0 END) AS engineering_count, \n  SUM(CASE WHEN d.name = 'Sales' THEN 1 ELSE 0 END) AS sales_count\n...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:51:15.408845"
    },
    {
      "query": "Analyze seasonal patterns in employee performance",
      "category": "Time Series",
      "expected_mode": "ANALYTICAL",
      "actual_mode": "ANALYTICAL",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 34.69504976272583,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ \n  p.year, \n  SUM(CASE WHEN d.name = 'Engineering' THEN 1 ELSE 0 END) AS engineering_count, \n  SUM(CASE WHEN d.name = 'Sales' THEN 1 ELSE 0 END) AS sales_count\n...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": true,
      "timestamp": "2025-09-15T15:51:50.605148"
    },
    {
      "query": "Show me data for employee ID 99999",
      "category": "Edge Cases",
      "expected_mode": null,
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 16.964666843414307,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */\n  e.id, e.first_name, e.last_name,\n  d.name AS department_name,\n  COALESCE(pe.tasks_completed, 0) AS tasks_completed,\n  COALESCE(pe.projects_involved, 0) AS pro...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:52:08.071159"
    },
    {
      "query": "List projects from the year 2030",
      "category": "Edge Cases",
      "expected_mode": null,
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 16.947405338287354,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ name, start_date \nFROM `projects` \nWHERE YEAR(start_date) = 2030 LIMIT 50",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:52:25.519367"
    },
    {
      "query": "Compare departments that don't exist",
      "category": "Edge Cases",
      "expected_mode": null,
      "actual_mode": "CLARIFICATION",
      "mode_correct": true,
      "sql_generated": false,
      "success": true,
      "execution_time": 9.261843919754028,
      "sql": "",
      "error": "",
      "has_table": false,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:52:35.281980"
    }
  ]
}