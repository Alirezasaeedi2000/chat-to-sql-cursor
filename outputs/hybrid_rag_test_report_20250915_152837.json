{
  "summary": {
    "total_tests": 27,
    "successful_tests": 24,
    "mode_correct_tests": 21,
    "success_rate": 88.88888888888889,
    "mode_accuracy": 77.77777777777779,
    "avg_execution_time": 19.73517749927662
  },
  "category_stats": {
    "Schema Understanding": {
      "total": 3,
      "success": 2,
      "mode_correct": 2
    },
    "Pattern Recognition": {
      "total": 5,
      "success": 4,
      "mode_correct": 4
    },
    "Visualization": {
      "total": 4,
      "success": 3,
      "mode_correct": 3
    },
    "Analytics": {
      "total": 3,
      "success": 3,
      "mode_correct": 2
    },
    "Clarification": {
      "total": 4,
      "success": 4,
      "mode_correct": 3
    },
    "Complex Joins": {
      "total": 3,
      "success": 3,
      "mode_correct": 3
    },
    "Time Series": {
      "total": 2,
      "success": 2,
      "mode_correct": 1
    },
    "Edge Cases": {
      "total": 3,
      "success": 3,
      "mode_correct": 3
    }
  },
  "detailed_results": [
    {
      "query": "Show me employee details along with their department information",
      "category": "Schema Understanding",
      "expected_mode": "TABLE",
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 21.089980840682983,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ \n  e.first_name, \n  e.last_name, \n  d.name AS department_name, \n  d.location AS department_location\nFROM `employe` e\nJOIN `departments` d ON e.department_id = d...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:19:51.706180"
    },
    {
      "query": "Which employees work on projects managed by someone from a different department?",
      "category": "Schema Understanding",
      "expected_mode": "TABLE",
      "actual_mode": "ERROR",
      "mode_correct": false,
      "sql_generated": false,
      "success": false,
      "execution_time": 20.86675477027893,
      "sql": "",
      "error": "object of type 'NoneType' has no len()",
      "timestamp": "2025-09-15T15:20:13.074525"
    },
    {
      "query": "List employees whose managers earn less than them",
      "category": "Schema Understanding",
      "expected_mode": "TABLE",
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 18.9859459400177,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ e.first_name, e.last_name \nFROM `performance` p JOIN `employe` e ON p.employee_id=e.id \nWHERE p.manager_rating < e.salary LIMIT 50",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:20:32.561144"
    },
    {
      "query": "Show a pie chart of employees working in exactly 2 active projects by department",
      "category": "Pattern Recognition",
      "expected_mode": "VISUALIZATION",
      "actual_mode": "ERROR",
      "mode_correct": false,
      "sql_generated": false,
      "success": false,
      "execution_time": 20.44555950164795,
      "sql": "",
      "error": "object of type 'NoneType' has no len()",
      "timestamp": "2025-09-15T15:20:53.508194"
    },
    {
      "query": "Count employees by department",
      "category": "Pattern Recognition",
      "expected_mode": "TABLE",
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 16.807663202285767,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ d.name, COUNT(*)\nFROM `employe` e\nJOIN `departments` d ON e.department_id = d.id\nGROUP BY d.name\nORDER BY COUNT(*) DESC\nLIMIT 50",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:21:10.816446"
    },
    {
      "query": "Compare Engineering vs Sales headcount over the last 3 years",
      "category": "Pattern Recognition",
      "expected_mode": "ANALYTICAL",
      "actual_mode": "ANALYTICAL",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 33.56259298324585,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ p.year,\n  SUM(CASE WHEN d.name = 'Engineering' THEN 1 ELSE 0 END) AS engineering_count,\n  SUM(CASE WHEN d.name = 'Sales' THEN 1 ELSE 0 END) AS sales_count\nFROM ...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": true,
      "timestamp": "2025-09-15T15:21:44.880534"
    },
    {
      "query": "Which employees have managers in the same department?",
      "category": "Pattern Recognition",
      "expected_mode": "TABLE",
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 24.14191722869873,
      "sql": "SELECT e.first_name, e.last_name \nFROM `employe` e JOIN `departments` d ON e.department_id=d.id \nJOIN `employee` m ON e.manager_id=m.`department_id`\nWHERE e.department_id = m.`department_id`;",
      "error": "",
      "has_table": false,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:22:09.524045"
    },
    {
      "query": "How many employees are working on exactly 4 ongoing projects?",
      "category": "Pattern Recognition",
      "expected_mode": "SHORT_ANSWER",
      "actual_mode": "SHORT_ANSWER",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 18.096394777297974,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ COUNT(*) \nFROM `employee_projects` \nWHERE employee_id IN (\n  SELECT project_id \n  FROM `employee_projects` \n  GROUP BY project_id \n  HAVING COUNT(DISTINCT emplo...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": true,
      "timestamp": "2025-09-15T15:22:28.121591"
    },
    {
      "query": "Create a pie chart of project budgets",
      "category": "Visualization",
      "expected_mode": "VISUALIZATION",
      "actual_mode": "VISUALIZATION",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 18.12968873977661,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ \n  name, \n  budget AS value\nFROM \n  `projects`\nORDER BY \n  budget DESC\nLIMIT 50;",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:22:46.752661"
    },
    {
      "query": "Plot salary distribution across departments",
      "category": "Visualization",
      "expected_mode": "VISUALIZATION",
      "actual_mode": "ERROR",
      "mode_correct": false,
      "sql_generated": false,
      "success": false,
      "execution_time": 19.88993787765503,
      "sql": "",
      "error": "object of type 'NoneType' has no len()",
      "timestamp": "2025-09-15T15:23:07.142994"
    },
    {
      "query": "Show a trend graph of hiring over time",
      "category": "Visualization",
      "expected_mode": "VISUALIZATION",
      "actual_mode": "VISUALIZATION",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 23.0475652217865,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ \n  p.year, \n  COUNT(*) AS hiring_count\nFROM \n  performance p\nGROUP BY \n  p.year\nORDER BY \n  p.year\nLIMIT 50;",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:23:30.692233"
    },
    {
      "query": "Generate a histogram of project durations",
      "category": "Visualization",
      "expected_mode": "VISUALIZATION",
      "actual_mode": "VISUALIZATION",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 23.118107318878174,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ \n  duration,\n  COUNT(*) AS count\nFROM (\n  SELECT \n    TIMESTAMPDIFF(MONTH, start_date, end_date) AS duration\n  FROM `projects`\n) AS subquery\nGROUP BY duration\nO...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:23:54.313342"
    },
    {
      "query": "Analyze the correlation between employee salary and project budget",
      "category": "Analytics",
      "expected_mode": "ANALYTICAL",
      "actual_mode": "ANALYTICAL",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 35.561245918273926,
      "sql": "SELECT \n  e.salary, \n  p.budget\nFROM \n  `performance` p\nJOIN \n  `employee_projects` ep ON p.employee_id = ep.employee_id\nJOIN \n  `projects` p2 ON ep.project_id = p2.id\nJOIN \n  `employe` e ON p.employe...",
      "error": "",
      "has_table": false,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:24:30.375751"
    },
    {
      "query": "What trends do you see in hiring across departments?",
      "category": "Analytics",
      "expected_mode": "ANALYTICAL",
      "actual_mode": "ANALYTICAL",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 27.25514006614685,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ \n  d.name AS department_name, \n  COUNT(e.id) AS employee_count, \n  AVG(p.hours_worked) AS average_hours_worked\nFROM `employe` e\nJOIN `departments` d ON e.depart...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:24:58.132497"
    },
    {
      "query": "Compare project success rates by department",
      "category": "Analytics",
      "expected_mode": "ANALYTICAL",
      "actual_mode": "CLARIFICATION",
      "mode_correct": false,
      "sql_generated": false,
      "success": true,
      "execution_time": 8.943139553070068,
      "sql": "",
      "error": "",
      "has_table": false,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:25:07.576656"
    },
    {
      "query": "We need more employees",
      "category": "Clarification",
      "expected_mode": "CLARIFICATION",
      "actual_mode": "ANALYTICAL",
      "mode_correct": false,
      "sql_generated": true,
      "success": true,
      "execution_time": 17.864179134368896,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ COUNT(*) \nFROM `employe` LIMIT 50",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": true,
      "timestamp": "2025-09-15T15:25:25.941633"
    },
    {
      "query": "Show me performance data",
      "category": "Clarification",
      "expected_mode": null,
      "actual_mode": "CLARIFICATION",
      "mode_correct": true,
      "sql_generated": false,
      "success": true,
      "execution_time": 8.933056116104126,
      "sql": "",
      "error": "",
      "has_table": false,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:25:35.376041"
    },
    {
      "query": "Compare departments",
      "category": "Clarification",
      "expected_mode": "CLARIFICATION",
      "actual_mode": "CLARIFICATION",
      "mode_correct": true,
      "sql_generated": false,
      "success": true,
      "execution_time": 10.200195789337158,
      "sql": "",
      "error": "",
      "has_table": false,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:25:46.076938"
    },
    {
      "query": "How are we doing?",
      "category": "Clarification",
      "expected_mode": "CLARIFICATION",
      "actual_mode": "CLARIFICATION",
      "mode_correct": true,
      "sql_generated": false,
      "success": true,
      "execution_time": 9.012285709381104,
      "sql": "",
      "error": "",
      "has_table": false,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:25:55.590173"
    },
    {
      "query": "Show employees working on the most expensive projects in each department",
      "category": "Complex Joins",
      "expected_mode": "TABLE",
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 23.592839241027832,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ d.name, COUNT(*)\nFROM `employe` e\nJOIN `departments` d ON e.department_id = d.id\nGROUP BY d.name\nORDER BY COUNT(*) DESC\nLIMIT 50",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:26:19.684114"
    },
    {
      "query": "Which departments have employees working on projects with budgets over 100k?",
      "category": "Complex Joins",
      "expected_mode": "TABLE",
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 21.310887813568115,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ d.name, COUNT(*)\nFROM `departments` d\nJOIN `employee_projects` ep ON d.id = ep.employee_id\nJOIN `projects` p ON ep.project_id = p.id\nWHERE p.budget > 100000\nGRO...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:26:41.496653"
    },
    {
      "query": "Find employees who share skills with their project teammates",
      "category": "Complex Joins",
      "expected_mode": "TABLE",
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 24.685465097427368,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ e.first_name, e.last_name \nFROM `employe` e \nJOIN `employee_projects` ep ON e.id = ep.employee_id \nWHERE e.id IN (\n  SELECT ep2.employee_id \n  FROM `employee_pr...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:27:06.683541"
    },
    {
      "query": "Show hiring trends for the last 5 years",
      "category": "Time Series",
      "expected_mode": "ANALYTICAL",
      "actual_mode": "TABLE",
      "mode_correct": false,
      "sql_generated": true,
      "success": true,
      "execution_time": 18.53734850883484,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ \n  p.year, \n  COUNT(*) AS total_hires\nFROM \n  `performance` p\nGROUP BY \n  p.year\nORDER BY \n  p.year DESC\nLIMIT 5;",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:27:25.722323"
    },
    {
      "query": "Analyze seasonal patterns in employee performance",
      "category": "Time Series",
      "expected_mode": "ANALYTICAL",
      "actual_mode": "ANALYTICAL",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 29.611484050750732,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ \n  p.year, \n  SUM(CASE WHEN d.name = 'Engineering' THEN 1 ELSE 0 END) AS engineering_count, \n  SUM(CASE WHEN d.name = 'Sales' THEN 1 ELSE 0 END) AS sales_count\n...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": true,
      "timestamp": "2025-09-15T15:27:55.835335"
    },
    {
      "query": "Show me data for employee ID 99999",
      "category": "Edge Cases",
      "expected_mode": null,
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 14.636040687561035,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */\n  e.id, e.first_name, e.last_name,\n  d.name AS department_name,\n  COALESCE(pe.tasks_completed, 0) AS tasks_completed,\n  COALESCE(pe.projects_involved, 0) AS pro...",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:28:10.972755"
    },
    {
      "query": "List projects from the year 2030",
      "category": "Edge Cases",
      "expected_mode": null,
      "actual_mode": "TABLE",
      "mode_correct": true,
      "sql_generated": true,
      "success": true,
      "execution_time": 15.570813179016113,
      "sql": "SELECT /*+ MAX_EXECUTION_TIME(30000) */ name, start_date \nFROM `projects` \nWHERE YEAR(start_date) = 2030 LIMIT 50",
      "error": "",
      "has_table": true,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:28:27.044945"
    },
    {
      "query": "Compare departments that don't exist",
      "category": "Edge Cases",
      "expected_mode": null,
      "actual_mode": "CLARIFICATION",
      "mode_correct": true,
      "sql_generated": false,
      "success": true,
      "execution_time": 8.953563213348389,
      "sql": "",
      "error": "",
      "has_table": false,
      "has_analysis": true,
      "has_short_answer": false,
      "timestamp": "2025-09-15T15:28:36.500028"
    }
  ]
}